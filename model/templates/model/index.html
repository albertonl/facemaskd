{% extends 'model/layout.html' %}

{% load static %}

{% block title %}Facemask'd{% endblock %}

{% block stylesheets %}
<link rel="stylesheet" type="text/css" src="{% static 'model/css/styles.css' %}">
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/p5.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/0.9.0/addons/p5.dom.min.js"></script>
<script src="https://unpkg.com/ml5@latest/dist/ml5.min.js"></script>

<script type="text/javascript" src="{% static 'model/js/index.js' %}"></script>
<script type="text/javascript" src="{% static 'model/js/progress_bar.js' %}"></script>
<script type="text/javascript" src="{% static 'model/js/helpers.js' %}"></script>
{% endblock %}

{% block main %}
<div class="col-12 my-2 px-5 text-center">
	<h1>Facemask'd - Face Mask Recognition</h1>
</div>
<div id="videoContainer" class="col-lg-6 col-sm-12">

</div>
<div id="videoControls" class="col-lg-6 col-sm-12 p-5">
	<h2>Prediction (<span id="percentCorrect" class="text-success">100%</span> &mdash; <span id="percentIncorrect" class="text-warning">100%</span> &mdash; <span id="percentNoMask"class="text-danger">100%</span>)&nbsp;&nbsp;&nbsp;<span class="temp-wrapper bg-success rounded p-2 ml-4" style="color: white;"><span id="temperature">37.0</span>&deg;C</span></h2>
	<div class="progress my-3" style="height: 30px;">
		<div id="progressCorrect" class="progress-bar bg-success" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">Face mask worn correctly</div>
	</div>
	<div class="progress my-3" style="height: 30px;">
		<div id="progressIncorrect" class="progress-bar bg-warning" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">Face mask worn incorrectly</div>
	</div>
	<div class="progress my-3" style="height: 30px;">
		<div id="progressNoMask" class="progress-bar bg-danger" role="progressbar" style="width: 100%;" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100">Without face mask</div>
	</div>

	<div class="row text-center">
		<div class="col-lg-6 d-lg-block d-sm-none">
			<h3 class="pt-5">Video frame size</h3>
			<div id="videoFrameSizeSelect" class="btn-group" role="group" aria-label="Video frame size selection">
				<button type="button" id="btnSmallVideo" data-size="small" class="btn btn-secondary btn-lg" title="42% width">Small</button>
				<button type="button" id="btnNormalVideo" data-size="normal" class="btn btn-secondary btn-lg active" title="50% width">Normal</button>
				<button type="button" id="btnLargeVideo" data-size="large" class="btn btn-secondary btn-lg" title="58% width">Large</button>
			</div>
		</div>
		<div class="col-lg-6 col-sm-12">
			<h3 class="pt-5">Play/pause video</h3>
			<button type="button" id="btnPlayPauseVideo" data-status="play" class="btn btn-primary btn-lg">Pause</button>
		</div>
		<div class="col-12">
			<h3 class="pt-5">Set video refresh rate (<span id="currentRefreshVideoRate">50</span>ms)</h3>
			<!--
				<label for="videoRefreshRateSelect" class="form-label">Refresh video every <span id="currentRefreshVideoRate">50</span>ms</label>
			-->
			<input type="range" class="form-range" min="0" max="1000" step="50" value="50" id="videoRefreshRateSelect">
		</div>
	</div>

	<div class="row mx-5" id="footer">
		<div class="col-12 text-center">
			<a href="http://iesmariablasco.com" target="_blank" title="Official website of the IES María Blasco (opens in a new tab)"><img src="{% static 'model/img/ies_logo.jpg' %}" alt="IES María Blasco" height="200"></a>
		</div>
	</div>
</div>
{% endblock %}
